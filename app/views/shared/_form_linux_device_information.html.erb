<h2><span><span><%= title(f.object) %></span></h2>
<table>
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceManufacturer %></td>
    <td><%= f.text_field :puavoDeviceManufacturer %></td>
  </tr>
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceModel %></td>
    <td><%= f.text_field :puavoDeviceModel %></td>
  </tr>
  <tr>
    <td class="label_td"><%= f.label :serialNumber %></td>
    <td><%= f.text_field :serialNumber %></td>
  </tr>

  <% if (f.object.classes.include?('puavoPrinter') || f.object.classes.include?('puavoOtherDevice')) || current_user.organisation_owner? %>
  <tr>
    <td class="label_td"><%= f.label :macAddress %></td>
    <td>
      <div id="device_macAddress">
	<% if f.object.macAddress.nil? %>
        <input name='device[macAddress][]' size='30' type='text' />
	<% else %>
	<% Array(f.object.macAddress).each do |mac_address| %>
        <input name='device[macAddress][]' size='30' type='text' value='<%= mac_address %>' />
	<% end %>
	<% end %>
      </div>
      <%= link_to "#", :class => "clone_prev_input_element btn" do %>
      <i class="icon-plus"></i><%= t('.shared.add_macAddress') %>
      <% end %>
      <div><%= field_error_text(f.object, :macAddress) %></div>
    </td>
  </tr>
  <% end %>

  <% if f.object.classes.include?('puavoPrinter') || f.object.classes.include?('puavoOtherDevice') %>
  <tr>
    <td><%= f.label :ipHostNumber %></td>
    <td><%= f.text_field :ipHostNumber %></td>
  </tr>
  <% end %>

  <% unless f.object.classes.include?('puavoPrinter') ||  f.object.classes.include?('puavoOtherDevice') %>
  <tr>
    <td class="label_td"><%= f.label :puavoDevicePrimaryUser %></td>
    <td><%= f.text_field :puavoDevicePrimaryUser %></td>
  </tr>
  <% end %>

  <% unless f.object.classes.include?('puavoServer') || f.object.classes.include?('puavoPrinter') ||  f.object.classes.include?('puavoOtherDevice') %>
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceBootMode %></td>
    <td><%= f.select( :puavoDeviceBootMode,
            [ [t('shared.boot_mode_netboot'),"netboot"],
            [t('shared.boot_mode_dualboot'), "dualboot"] ] ) %></td>
  </tr>
  <% end %>

  <% unless f.object.classes.include?('puavoPrinter') || f.object.classes.include?('puavoOtherDevice') %>

  <tr>
    <td class="label_td"><%= f.label :puavoPrinterDeviceURI %></td>
    <td><%= f.text_field :puavoPrinterDeviceURI %></td>
  </tr>

  <tr>
    <td class="label_td"><%= f.label :puavoPrinterPPD %></td>
    <td><%= f.file_field :puavoPrinterPPD %></td>
  </tr>

  <tr>
    <td class="label_td"><%= f.label :puavoDefaultPrinter %></td>
    <td><%= f.text_field :puavoDefaultPrinter %></td>
  </tr>

  <tr>
    <td class="label_td"><%= f.label :puavoDeviceDefaultAudioSource %></td>
    <td><%= f.text_field :puavoDeviceDefaultAudioSource %></td>
  </tr>

  <tr>
    <td class="label_td"><%= f.label :puavoDeviceDefaultAudioSink %></td>
    <td><%= f.text_field :puavoDeviceDefaultAudioSink %></td>
  </tr>

  <% if f.object.class == Device %>
  <%= render :partial => 'shared/form_allow_guest_and_personal_device', :locals => { :f => f } %>
  <% end %>

  <% if ["laptop", "wirelessaccesspoint"].include?(f.object.puavoDeviceType) %>
    <%= render :partial => 'shared/form_automatic_image_updates', :locals => { :f => f } %>
  <% end %>

  <% if ["laptop"].include?(f.object.puavoDeviceType) %>
    <%= render :partial => 'shared/form_personally_administered', :locals => { :f => f } %>
  <% end %>

  <% end %>

  <tr>
    <td class="label_td"><%= f.label :description %></td>
    <td><%= f.text_area :description %></td>
  </tr>
</table>

<% unless f.object.classes.include?('puavoServer') || f.object.classes.include?('puavoPrinter') || f.object.classes.include?('puavoOtherDevice') %>
<h2><span><%= t('shared.autopoweroff') %></span></h2>
<table id="autopoweroff">
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceAutoPowerOffMode %></td>
    <td>
      <table class="table-in-table">
	<tr>
	  <td class="label_td">
	    <%= f.label :puavoDeviceAutoPowerOffMode_default %>
	  </td>
	  <td class="label_td">
	    <%= f.label :puavoDeviceAutoPowerOffMode_off %>
	  </td>
	  <td class="label_td">
	    <%= f.label :puavoDeviceAutoPowerOffMode_custom %>
	  </td>
	</tr>
	<tr>
	  <td>
	    <%= f.radio_button :puavoDeviceAutoPowerOffMode, "default" %>
	  </td>
	  <td>
	    <%= f.radio_button :puavoDeviceAutoPowerOffMode, "off" %>
	  </td>
	  <td>
	    <%= f.radio_button :puavoDeviceAutoPowerOffMode, "custom" %>
	  </td>
	</tr>
	<tr>
	  <td class="label_td"><%= f.label :puavoDeviceOnHour %></td>
	  <td class="label_td"><%= f.label :puavoDeviceOffHour %></td>
	</tr>
	<tr>
	  <td>
	    <%= f.select( :puavoDeviceOnHour,
                [[t('.select'), '']] + (1..24).each.map{ |h| [h.to_s, h.to_s] },
                :selected => (f.object.puavoDeviceOnHour or "") ) %>
	  </td>
	  <td>
	    <%= f.select( :puavoDeviceOffHour,
                [[t('.select'), '']] + ( (1..24).map{ |h| [h.to_s, h.to_s] } ),
                :selected => (f.object.puavoDeviceOffHour or "" ) ) %>
	  </td>
	</tr>
      </table>
    </td>
  </tr>
</table>
<% end %>

<%= render :partial => 'shared/form_purchase_information', :locals => { :f => f } %>

<h2><span><%= t('shared.location') %></span></h2>

<table>
  <tr>
    <td class="label_td"><%= f.label :puavoLocationName %></td>
    <td><%= f.text_field :puavoLocationName %></td>
  </tr>
  <tr>
    <td class="label_td"><%= f.label :puavoLatitude %></td>
    <td><%= f.text_field :puavoLatitude %></td>
  </tr>
  <tr>
    <td class="label_td"><%= f.label :puavoLongitude %></td>
    <td><%= f.text_field :puavoLongitude %></td>
  </tr>

  <% if (f.object.classes | ['puavoNetbootDevice', 'puavoLocalbootDevice', 'puavoServer']).count < (f.object.classes.count + 3) %>
</table>

<h2><span><%= t('shared.display_settings') %></span></h2>
<table>
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceXserver %></td>
    <td><%= f.text_field :puavoDeviceXserver, :size => 45 %></td>
</tr>

<tr>
  <td class="label_td label_for_input_text_list"><%= f.label :puavoDeviceXrandr %></td>
  <td>
    <div id="device_puavoDeviceXrandr">
      <% if f.object.puavoDeviceXrandr.nil? %>
      <input name='device[puavoDeviceXrandr][]'  type='text' />
      <% else %>
      <% Array(f.object.puavoDeviceXrandr).each_index do |index| %>
      <input name='device[puavoDeviceXrandr][]'  type='text' value='<%= Array(f.object.puavoDeviceXrandr)[index] %>' />
      <% end %>
      <% end %>
    </div>
    <%= link_to "#", :class => "clone_prev_input_element btn" do %>
    <i class="icon-plus"></i><%= t('.shared.add_puavoDeviceXrandr') %>
    <% end %>
  </td>
</tr>

<tr>
  <td class="label_td"><%= f.label :puavoDeviceXrandrDisable %></td>
  <td><%= f.check_box :puavoDeviceXrandrDisable %></td>
</tr>

<tr>
  <td class="label_td"><%= f.label :puavoDeviceResolution %></td>
  <td><%= f.text_field :puavoDeviceResolution %></td>
</tr>

<tr>
  <td class="label_td"><%= f.label :puavoDeviceHorzSync %></td>
  <td><%= f.text_field :puavoDeviceHorzSync %></td>
</tr>

<tr>
  <td class="label_td"><%= f.label :puavoDeviceVertRefresh %></td>
  <td><%= f.text_field :puavoDeviceVertRefresh %></td>
</tr>

</table>

<h2><span><%= t('shared.kernel_settings') %></span></h2>
<table>
  <% if ["thinclient", "fatclient", "laptop", "ltspserver", "bootserver"].include?(f.object.puavoDeviceType) %>
  <tr>
    <td><%= f.label :puavoDeviceImage %></td>
    <td><%= f.text_field :puavoDeviceImage %></td>
  </tr>
  <% end %>
  <% if f.object.puavoDeviceType == "thinclient" %>
  <tr>
    <td><%= f.label :puavoDeviceBootImage %></td>
    <td><%= f.text_field :puavoDeviceBootImage %></td>
  </tr>
    <% if current_user.organisation_owner? %>
  <tr>
    <td><%= f.label :puavoPreferredServer %></td>
    <td><%= f.select( :puavoPreferredServer,
            [[t('.select'), ""]] + @servers ) %></td>
  </tr>
    <% end %>
  <% end %>

  <% if f.object.puavoDeviceType != "laptop" %>
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceKernelVersion %></td>
    <td><%= f.text_field :puavoDeviceKernelVersion %></td>
  </tr>
  <tr>
    <td class="label_td"><%= f.label :puavoDeviceKernelArguments %></td>
    <td><%= f.text_field :puavoDeviceKernelArguments %></td>
  </tr>
  <% end %>
</table>

  <% if ["thinclient", "fatclient", "laptop"].include?(f.object.puavoDeviceType) %>

<h2><%= t('.printer_title') %></h2>

<table>
<p><%= t('.printer_description') %></p>

  <ul>
    <% @school_printers.each do |printer| %>
    <li>
      <label>
	<%= hidden_field_tag "printers[#{ printer[:object].dn}]", false %>
	<%= check_box_tag "printers[#{ printer[:object].dn}]", true, printer[:has_printer], :disabled => printer[:input_disabled] %>

	<%= link_to(
            printer[:object].printerDescription,
            edit_printer_permission_path(@school, printer[:object])
	    ) %>
      </label>
    </li>
    <% end %>
  </ul>
</table>

  <% end %>

<%= render :partial => 'shared/form_mountpoint', :locals => { :f => f } %>

<% end %>
